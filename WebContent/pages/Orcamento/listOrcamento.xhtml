<!--
  
  	Copyright (c) 2012 - 2015 Hércules S. S. José

    Este arquivo é parte do programa Orçamento Doméstico.
    

    Orçamento Doméstico é um software livre; você pode redistribui-lo e/ou 

    modificá-lo dentro dos termos da Licença Pública Geral Menor GNU como 

    publicada pela Fundação do Software Livre (FSF); na versão 2.1 da 

    Licença.
    

    Este programa é distribuído na esperança que possa ser útil, 

    mas SEM NENHUMA GARANTIA; sem uma garantia implícita de ADEQUAÇÂO a 
    
    qualquer MERCADO ou APLICAÇÃO EM PARTICULAR. Veja a Licença Pública 
    
    Geral Menor GNU em português para maiores detalhes.
    

    Você deve ter recebido uma cópia da Licença Pública Geral Menor GNU sob o 

    nome de "LICENSE.TXT" junto com este programa, se não, acesse o site do
    
    projeto no endereco https://github.com/herculeshssj/orcamento ou escreva 
    
    para a Fundação do Software Livre(FSF) Inc., 51 Franklin St, Fifth Floor, 
    
    Boston, MA  02110-1301, USA.
    

    Para mais informações sobre o programa Orçamento Doméstico e seu autor entre  

    em contato pelo e-mail herculeshssj@gmail.com, ou ainda escreva para 

    Hércules S. S. José, Av. Ministro Lafaeyte de Andrade, 1683 - Bl. 3 Apt 404, 

    Marco II - Nova Iguaçu, RJ, Brasil.
  
  -->


<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui">

<ui:composition template="/templates/listagem.xhtml">

	<ui:param name="managedBean" value="#{orcamentoMB}" />
	
	<ui:define name="pesquisa">
	
		Orçamento:
		<h:selectOneMenu value="#{managedBean.orcamentoSelecionado}" converter="entityConverter">
			<f:selectItems value="#{managedBean.listEntity}" var="item" itemLabel="#{item.label}" itemValue="#{item}"/>
		</h:selectOneMenu>
	
	</ui:define>

	<ui:define name="pesquisa_avancada">
	
		<h:commandButton title="Editar" image="/resources/images/alterar.png" action="#{managedBean.edit}">
			<f:setPropertyActionListener value="#{managedBean.orcamentoSelecionado.id}" target="#{managedBean.idEntity}"/>
		</h:commandButton>
		&nbsp;	 
		<h:commandButton title="Excluir" image="/resources/images/excluir.png" action="#{managedBean.view}">
			<f:setPropertyActionListener value="#{managedBean.orcamentoSelecionado.id}" target="#{managedBean.idEntity}"/>
		</h:commandButton>
		&nbsp;
		<h:commandButton title="Atualizar" image="/resources/images/circular.png" action="#{managedBean.atualizarValores}"/>
		
		<br/><br/>
		
		<h:panelGroup rendered="#{managedBean.mostrarInformacao}">
			<h:outputText value="#{managedBean.orcamentoSelecionado.alternativeLabel}" />
			<br/>
			<strong><h:outputText value="Conta / Tipo de conta: " rendered="#{managedBean.orcamentoSelecionado != null}"/></strong>
			<h:panelGroup>			
				<h:outputText value="Sem distinção de conta ou Tipo de Conta" rendered="#{managedBean.orcamentoSelecionado.tipoOrcamento == 'SEMDISTINCAO'}"/>
				<h:outputText value="#{managedBean.orcamentoSelecionado.conta.label}" rendered="#{managedBean.orcamentoSelecionado.tipoOrcamento == 'CONTA'}"/>
				<h:outputText value="#{managedBean.orcamentoSelecionado.tipoConta}" rendered="#{managedBean.orcamentoSelecionado.tipoOrcamento == 'TIPOCONTA'}"/>
			</h:panelGroup>
			&nbsp;
			<strong><h:outputText value="Abrangência: " rendered="#{managedBean.orcamentoSelecionado != null}"/></strong>
			<h:outputText value="#{managedBean.orcamentoSelecionado.abrangenciaOrcamento}" />
		</h:panelGroup>
	
	</ui:define>
	
	<ui:define name="tabela">
		<p:dataTable id="tableAbrangenciaCategoria" width="100%" value="#{managedBean.listaDetalheOrcamento}" var="item" rendered="#{managedBean.orcamentoSelecionado.abrangenciaOrcamento == 'CATEGORIA'}">
			<p:column style="text-align: center; vertical-align: middle;">
				<f:facet name="header">
					<h:outputText value="Descrição"/>
				</f:facet>
				<h:outputText value="#{item.descricao}" style="#{item.tipoCategoria == 'CREDITO' ? 'color: #0000FF;' : 'color: #FF0000;' }"/>					
			</p:column>
			<p:column style="text-align: center; vertical-align: middle;">
				<f:facet name="header">
					<h:outputText value="Previsto"/>
				</f:facet>
				<h:outputText value="#{managedBean.moedaPadrao.simboloMonetario} " style="#{item.tipoCategoria == 'CREDITO' ? 'color: #0000FF;' : 'color: #FF0000;' }"/>
			    <h:outputText value="#{item.previsao}" style="#{item.tipoCategoria == 'CREDITO' ? 'color: #0000FF;' : 'color: #FF0000;' }">
			     	<f:convertNumber minFractionDigits="2" maxFractionDigits="2" />
			    </h:outputText>				
			</p:column>
			<p:column style="text-align: center; vertical-align: middle;">
				<f:facet name="header">
					<h:outputText value="Realizado"/>
				</f:facet>
				<h:outputText value="#{managedBean.moedaPadrao.simboloMonetario} " style="#{item.tipoCategoria == 'CREDITO' ? 'color: #0000FF;' : 'color: #FF0000;' }"/>
			    <h:outputText value="#{item.realizado}" style="#{item.tipoCategoria == 'CREDITO' ? 'color: #0000FF;' : 'color: #FF0000;' }">
			     	<f:convertNumber minFractionDigits="2" maxFractionDigits="2" />
			    </h:outputText>				
			</p:column>					
			<p:column style="text-align: center; vertical-align: middle; font-weight: bold;">
				<f:facet name="header">
					<h:outputText value="%"/>
				</f:facet>				
				<h:outputText value="#{item.porcentagem}" rendered="#{item.situacao == 'RUIM'}" style="color: #FF0000;">
					<f:convertNumber minFractionDigits="2" maxFractionDigits="2" />
				</h:outputText>
				<h:outputText value=" %" rendered="#{item.situacao == 'RUIM'}" style="color: #FF0000;" />
				
				<h:outputText value="#{item.porcentagem}" rendered="#{item.situacao == 'REGULAR'}" style="color: #CFCF00;">
					<f:convertNumber minFractionDigits="2" maxFractionDigits="2" />
				</h:outputText>
				<h:outputText value=" %" rendered="#{item.situacao == 'REGULAR'}" style="color: #CFCF00;" />
				
				<h:outputText value="#{item.porcentagem}" rendered="#{item.situacao == 'BOM'}" style="color: #339900;">
					<f:convertNumber minFractionDigits="2" maxFractionDigits="2" />
				</h:outputText>										
				<h:outputText value=" %" rendered="#{item.situacao == 'BOM'}" style="color: #339900;" />
			</p:column>
			<p:columnGroup type="footer">
				<p:row>
					<p:column footerText="Saldo:"/>
					<p:column footerText="#{managedBean.saldoPrevistoDetalheOrcamento}"/>
					<p:column footerText="#{managedBean.saldoRealizadoDetalheOrcamento}"/>
					<p:column footerText=""/>
				</p:row>
			</p:columnGroup>
		</p:dataTable>
		
		<p:tabView rendered="#{managedBean.orcamentoSelecionado.abrangenciaOrcamento == 'FAVORECIDO' or managedBean.orcamentoSelecionado.abrangenciaOrcamento == 'MEIOPAGAMENTO'}">
		
			<p:tab title="Crédito">
			
				<p:dataTable id="tableFavorecidoMeioPagamentoCredito" width="100%" value="#{managedBean.listaDetalheOrcamento}" var="item">
					<p:column style="text-align: center; vertical-align: middle;">
						<f:facet name="header">
							<h:outputText value="Descrição"/>
						</f:facet>
						<h:outputText value="#{item.descricao}" />					
					</p:column>
					<p:column style="text-align: center; vertical-align: middle;">
						<f:facet name="header">
							<h:outputText value="Previsto - Crédito"/>
						</f:facet>
						<h:outputText value="#{managedBean.moedaPadrao.simboloMonetario} "/>
					    <h:outputText value="#{item.previsaoCredito}">
					     	<f:convertNumber minFractionDigits="2" maxFractionDigits="2" />
					    </h:outputText>				
					</p:column>
					<p:column style="text-align: center; vertical-align: middle;">
						<f:facet name="header">
							<h:outputText value="Realizado - Crédito"/>
						</f:facet>
						<h:outputText value="#{managedBean.moedaPadrao.simboloMonetario} "/>
					    <h:outputText value="#{item.realizadoCredito}">
					     	<f:convertNumber minFractionDigits="2" maxFractionDigits="2" />
					    </h:outputText>				
					</p:column>					
					<p:column style="text-align: center; vertical-align: middle; font-weight: bold;">
						<f:facet name="header">
							<h:outputText value="%"/>
						</f:facet>				
						<h:outputText value="#{item.porcentagemCredito}" rendered="#{item.situacaoCredito == 'RUIM'}" style="color: #FF0000;">
							<f:convertNumber minFractionDigits="2" maxFractionDigits="2" />
						</h:outputText>
						<h:outputText value=" %" rendered="#{item.situacaoCredito == 'RUIM'}" style="color: #FF0000;" />
						
						<h:outputText value="#{item.porcentagemCredito}" rendered="#{item.situacaoCredito == 'REGULAR'}" style="color: #CFCF00;">
							<f:convertNumber minFractionDigits="2" maxFractionDigits="2" />
						</h:outputText>
						<h:outputText value=" %" rendered="#{item.situacaoCredito == 'REGULAR'}" style="color: #CFCF00;" />
						
						<h:outputText value="#{item.porcentagemCredito}" rendered="#{item.situacaoCredito == 'BOM'}" style="color: #339900;">
							<f:convertNumber minFractionDigits="2" maxFractionDigits="2" />
						</h:outputText>										
						<h:outputText value=" %" rendered="#{item.situacaoCredito == 'BOM'}" style="color: #339900;" />
					</p:column>
					<p:columnGroup type="footer">
						<p:row>
							<p:column footerText="Saldo:"/>
							<p:column footerText="#{managedBean.saldoCreditoPrevistoDetalheOrcamento}"/>
							<p:column footerText="#{managedBean.saldoCreditoRealizadoDetalheOrcamento}"/>
							<p:column footerText=""/>
						</p:row>
					</p:columnGroup>					
				</p:dataTable>
			
			</p:tab>
		
			<p:tab title="Débito">
			
				<p:dataTable id="tableFavorecidoMeioPagamentoDebito" width="100%" value="#{managedBean.listaDetalheOrcamento}" var="item">
					<p:column style="text-align: center; vertical-align: middle;">
						<f:facet name="header">
							<h:outputText value="Descrição"/>
						</f:facet>
						<h:outputText value="#{item.descricao}" />					
					</p:column>					
					<p:column style="text-align: center; vertical-align: middle;">
						<f:facet name="header">
							<h:outputText value="Previsto - Débito"/>
						</f:facet>
						<h:outputText value="#{managedBean.moedaPadrao.simboloMonetario} "/>
					    <h:outputText value="#{item.previsaoDebito}">
					     	<f:convertNumber minFractionDigits="2" maxFractionDigits="2" />
					    </h:outputText>				
					</p:column>
					<p:column style="text-align: center; vertical-align: middle;">
						<f:facet name="header">
							<h:outputText value="Realizado - Débito"/>
						</f:facet>
						<h:outputText value="#{managedBean.moedaPadrao.simboloMonetario} "/>
					    <h:outputText value="#{item.realizadoDebito}">
					     	<f:convertNumber minFractionDigits="2" maxFractionDigits="2" />
					    </h:outputText>				
					</p:column>					
					<p:column style="text-align: center; vertical-align: middle; font-weight: bold;">
						<f:facet name="header">
							<h:outputText value="%"/>
						</f:facet>				
						<h:outputText value="#{item.porcentagemDebito}" rendered="#{item.situacaoDebito == 'RUIM'}" style="color: #FF0000;">
							<f:convertNumber minFractionDigits="2" maxFractionDigits="2" />
						</h:outputText>
						<h:outputText value=" %" rendered="#{item.situacaoDebito == 'RUIM'}" style="color: #FF0000;" />
						
						<h:outputText value="#{item.porcentagemDebito}" rendered="#{item.situacaoDebito == 'REGULAR'}" style="color: #CFCF00;">
							<f:convertNumber minFractionDigits="2" maxFractionDigits="2" />
						</h:outputText>
						<h:outputText value=" %" rendered="#{item.situacaoDebito == 'REGULAR'}" style="color: #CFCF00;" />
						
						<h:outputText value="#{item.porcentagemDebito}" rendered="#{item.situacaoDebito == 'BOM'}" style="color: #339900;">
							<f:convertNumber minFractionDigits="2" maxFractionDigits="2" />
						</h:outputText>										
						<h:outputText value=" %" rendered="#{item.situacaoDebito == 'BOM'}" style="color: #339900;" />
					</p:column>
					<p:columnGroup type="footer">
						<p:row>
							<p:column footerText="Saldo:"/>
							<p:column footerText="#{managedBean.saldoDebitoPrevistoDetalheOrcamento}"/>
							<p:column footerText="#{managedBean.saldoDebitoRealizadoDetalheOrcamento}"/>
							<p:column footerText=""/>
						</p:row>
					</p:columnGroup>
				</p:dataTable>	
			
			</p:tab>
		
		</p:tabView>
		
	</ui:define>
	
	<ui:define name="tabela_rodape"></ui:define>

</ui:composition>
</html>